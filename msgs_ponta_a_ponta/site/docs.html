<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Documentação Técnica - 5uv1</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      /* Estilos específicos para a documentação */
      .docs-content {
        padding: 60px 0;
        background: #fff;
      }
      .docs-content h1 {
        font-size: 2.5rem;
        margin-bottom: 20px;
        color: var(--text);
      }
      .docs-content h2 {
        font-size: 1.8rem;
        margin-top: 40px;
        margin-bottom: 15px;
        color: var(--primary);
        border-bottom: 1px solid var(--border);
        padding-bottom: 10px;
      }
      .docs-content h3 {
        font-size: 1.4rem;
        margin-top: 30px;
        margin-bottom: 10px;
        color: var(--text);
      }
      .docs-content p {
        margin-bottom: 15px;
        color: var(--text-light);
        line-height: 1.8;
      }
      .docs-content ul,
      .docs-content ol {
        margin-bottom: 20px;
        padding-left: 20px;
      }
      .docs-content li {
        margin-bottom: 8px;
        color: var(--text-light);
      }
      .docs-content code {
        background: var(--bg-alt);
        padding: 2px 6px;
        border-radius: 4px;
        font-family: monospace;
        color: var(--primary-dark);
        font-size: 0.9em;
      }
      .docs-content pre {
        background: #1e293b;
        color: #e2e8f0;
        padding: 20px;
        border-radius: 8px;
        overflow-x: auto;
        margin-bottom: 20px;
        font-family: monospace;
            position: relative;
      }
      .docs-content pre code {
        background: transparent;
        padding: 0;
        color: inherit;
      }
      .docs-nav {
        background: var(--bg-alt);
        padding: 20px 0;
        border-bottom: 1px solid var(--border);
        position: sticky;
        top: 81px; /* Altura do header aprox */
        z-index: 90;
      }
      .docs-nav a {
        color: var(--text-light);
        text-decoration: none;
        margin-right: 20px;
        font-weight: 500;
        font-size: 0.95rem;
      }
      .docs-nav a:hover {
        color: var(--primary);
      }
      .mermaid {
        background: #f8fafc;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        text-align: center;
      }
        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #e2e8f0;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .copy-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="container">
        <div class="logo">
          <svg width="40" height="40" viewBox="0 0 128 128">
            <defs>
              <linearGradient
                id="grad_logo"
                x1="0%"
                y1="0%"
                x2="100%"
                y2="100%"
              >
                <stop
                  offset="0%"
                  style="stop-color: #667eea; stop-opacity: 1"
                />
                <stop
                  offset="100%"
                  style="stop-color: #764ba2; stop-opacity: 1"
                />
              </linearGradient>
            </defs>
            <rect width="128" height="128" rx="24" fill="url(#grad_logo)" />
            <text
              x="50%"
              y="54%"
              font-family="sans-serif"
              font-weight="900"
              font-size="44"
              fill="white"
              text-anchor="middle"
              dominant-baseline="middle"
              letter-spacing="-1"
            >
              5uv1
            </text>
          </svg>
          <span>5uv1 Docs</span>
        </div>
        <nav class="nav">
          <a href="index.html">Home</a>
          <a href="index.html#features">Recursos</a>
          <a href="index.html#download">Download</a>
        </nav>
        <a
          href="https://github.com/gusvioli/msgs_ponta_a_ponta"
          class="btn btn-outline"
          >GitHub</a
        >
      </div>
    </header>

    <div class="docs-nav">
      <div class="container">
        <a href="#intro">Introdução</a>
        <a href="#architecture">Arquitetura</a>
        <a href="#setup">Configuração</a>
        <a href="#security">Segurança</a>
            <a href="#license">Licença</a>
        <a href="#contributing">Contribuindo</a>
      </div>
    </div>

    <section class="docs-content">
      <div class="container">
        <h1 id="intro">Documentação Técnica</h1>
        <p>
          Bem-vindo à documentação oficial do <strong>5uv1</strong>. Este guia é
          destinado a desenvolvedores que desejam entender a arquitetura do
          sistema, auditar o código ou contribuir com o projeto.
        </p>

        <h2 id="architecture">Arquitetura do Sistema</h2>
        <p>
          O 5uv1 é composto por três componentes principais que interagem para
          fornecer comunicação segura:
        </p>

        <h3>1. Servidor de Sinalização (Signaling Server)</h3>
        <p>
          Responsável apenas por estabelecer a conexão inicial entre os pares
          (peers). Ele retransmite mensagens criptografadas, mas não tem
          capacidade de lê-las.
        </p>
        <ul>
          <li>
            <strong>Tecnologia:</strong> Node.js + WebSocket (<code>ws</code>).
          </li>
          <li>
            <strong>Função:</strong> Handshake, troca de chaves públicas e
            sinalização WebRTC (opcional).
          </li>
          <li>
            <strong>Privacidade:</strong> Não armazena logs de mensagens, apenas
            metadados de conexão temporários.
          </li>
        </ul>

        <h3>2. Dashboard de Gerenciamento</h3>
        <p>
          Uma interface web para administradores gerenciarem seus servidores
          privados.
        </p>
        <ul>
          <li>
            <strong>Tecnologia:</strong> Node.js (Backend) + HTML/JS (Frontend).
          </li>
          <li>
            <strong>Função:</strong> Monitoramento de status, gerenciamento de
            tokens de acesso e visualização de métricas.
          </li>
        </ul>

        <h3>3. Extensão do Cliente (Chrome Extension)</h3>
        <p>O cliente final onde a criptografia acontece.</p>
        <ul>
          <li>
            <strong>Tecnologia:</strong> JavaScript (Manifest V3), Web Crypto
            API.
          </li>
          <li>
            <strong>Função:</strong> Geração de chaves,
            criptografia/descriptografia local e interface de chat.
          </li>
        </ul>

        <h2 id="setup">Configuração do Ambiente</h2>
        <p>
          Para rodar o projeto localmente, você precisará do Node.js (v16+) e
          NPM.
        </p>

        <h3>Instalação</h3>
        <pre><code>git clone https://github.com/gusvioli/msgs_ponta_a_ponta.git
cd msgs_ponta_a_ponta
./start-app.sh all</code></pre>

        <p>
          O script <code>start-app.sh</code> irá instalar as dependências e
          iniciar tanto o servidor WebSocket quanto o Dashboard.
        </p>

        <h2 id="security">Segurança e Criptografia</h2>
        <p>
          Utilizamos um modelo híbrido de criptografia para garantir
          confidencialidade e integridade.
        </p>

        <h3>Troca de Chaves (ECDH)</h3>
        <p>
          Utilizamos <strong>Elliptic Curve Diffie-Hellman (P-256)</strong> para
          estabelecer um segredo compartilhado entre dois usuários sem nunca
          transmiti-lo pela rede.
        </p>
        
        <div class="mermaid">
          sequenceDiagram
            participant Alice
            participant Server
            participant Bob
            Alice->>Alice: Gera Par de Chaves (PrivA, PubA)
            Bob->>Bob: Gera Par de Chaves (PrivB, PubB)
            Alice->>Server: Envia PubA (via WebSocket)
            Server->>Bob: Encaminha PubA
            Bob->>Server: Envia PubB (via WebSocket)
            Server->>Alice: Encaminha PubB
            Alice->>Alice: Deriva Segredo (PrivA + PubB)
            Bob->>Bob: Deriva Segredo (PrivB + PubA)
            Note over Alice,Bob: Agora ambos têm o mesmo segredo compartilhado!
        </div>

        <h3>Criptografia de Mensagens (AES-GCM)</h3>
        <p>
          As mensagens são criptografadas usando
          <strong>AES-GCM de 256 bits</strong> com o segredo derivado. O GCM
          (Galois/Counter Mode) garante tanto a confidencialidade quanto a
          integridade dos dados.
        </p>

        <pre><code>// Exemplo de uso do CryptoHandler
const keys = await CryptoHandler.generateKeys();
const sharedSecret = await CryptoHandler.deriveSharedSecret(myPrivateKey, otherPublicKey);
const encrypted = await CryptoHandler.encrypt(sharedSecret, "Olá Mundo");</code></pre>

            <h2 id="license">Licença e Uso Comercial</h2>
            <p>O 5uv1 é licenciado sob a <strong>GNU Affero General Public License v3 (AGPLv3)</strong>.</p>
            <p>Isso significa que você pode usar, modificar e distribuir o software livremente, desde que mantenha o código fonte aberto, inclusive quando rodar via rede (SaaS).</p>
            <p>Para uso comercial proprietário (White Label, Enterprise) sem a obrigação de abrir o código, entre em contato para adquirir uma Licença Comercial.</p>

        <h2 id="contributing">Como Contribuir</h2>
        <p>Contribuições são bem-vindas! Siga os passos abaixo:</p>
        <ol>
          <li>Faça um Fork do repositório.</li>
          <li>
            Crie uma branch para sua feature (<code
              >git checkout -b feature/nova-feature</code
            >).
          </li>
          <li>
            Commit suas mudanças (<code
              >git commit -m 'Adiciona nova feature'</code
            >).
          </li>
          <li>
            Push para a branch (<code>git push origin feature/nova-feature</code
            >).
          </li>
          <li>Abra um Pull Request.</li>
        </ol>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-logo">5uv1</div>
          <div class="footer-links">
            <a href="../dashboard/public/terms.html">Termos de Uso</a>
            <a href="../dashboard/public/terms.html">Privacidade</a>
            <a href="https://github.com/gusvioli/msgs_ponta_a_ponta">GitHub</a>
          </div>
        </div>
        <div class="copyright">
          &copy; 2025 5uv1. Todos os direitos reservados.
        </div>
      </div>
    </footer>

    <!-- Mermaid JS -->
    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
    </script>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('pre').forEach((pre) => {
          // Verifica se tem código dentro
          if (!pre.querySelector('code')) return;

          const button = document.createElement('button');
          button.className = 'copy-btn';
          button.textContent = 'Copiar';

          button.addEventListener('click', () => {
            const code = pre.querySelector('code').innerText;
            navigator.clipboard.writeText(code).then(() => {
              button.textContent = 'Copiado!';
              setTimeout(() => {
                button.textContent = 'Copiar';
              }, 2000);
            });
          });

          pre.appendChild(button);
        });
      });
    </script>
  </body>
</html>
